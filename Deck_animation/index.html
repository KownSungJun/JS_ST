<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Stack Deck to Hand Animation</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 40px;
  }

  /* ë± ì˜ì—­ */
  .deck {
    width: 120px;
    height: 160px;
    position: relative;
    cursor: pointer;
  }

  .deck-card {
    width: 120px;
    height: 160px;
    border-radius: 12px;
    border: 2px solid #222;
    background: white;
    position: absolute;
    top: 0;
    left: 0;
    transform: translate(var(--x,0), var(--y,0));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    transition: transform 0.6s ease, top 0.6s ease, left 0.6s ease;
  }

  /* ì¹´ë“œê°€ ê²¹ì³ ë³´ì´ê²Œ */
  .deck-card:nth-child(1) { top: 0px; }
  .deck-card:nth-child(2) { top: 4px; }
  .deck-card:nth-child(3) { top: 8px; }
  .deck-card:nth-child(4) { top: 12px; }
  .deck-card:nth-child(5) { top: 16px; }

  /* í”Œë ˆì´ì–´ íŒ¨ */
  .player-field {
    margin-top: 50px;
    width: 90%;
    min-height: 180px;
    padding: 20px;
    border: 3px dashed #777;
    border-radius: 12px;
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
    background: white;
  }
</style>
</head>
<body>

<h2>ì¤‘ì•™ ë±</h2>
<div class="deck" id="deck">
  <div class="deck-card" data-type="ê°€ìœ„">âœŒï¸</div>
  <div class="deck-card" data-type="ë°”ìœ„">âœŠ</div>
  <div class="deck-card" data-type="ë³´">ğŸ–ï¸</div>
  <div class="deck-card" data-type="ë°”ìœ„">âœŠ</div>
  <div class="deck-card" data-type="ê°€ìœ„">âœŒï¸</div>
</div>

<h2>ë‚´ íŒ¨</h2>
<div class="player-field" id="playerField"></div>

<script>
  const deck = document.getElementById("deck");
  const playerField = document.getElementById("playerField");

  deck.addEventListener("click", () => {
    const cards = deck.querySelectorAll(".deck-card");
    if (cards.length === 0) return;

    const topCard = cards[cards.length - 1]; // ê°€ì¥ ìœ„ ì¹´ë“œ
    const cardRect = topCard.getBoundingClientRect();
    const fieldRect = playerField.getBoundingClientRect();

    // ì´ë™ ê±°ë¦¬ ê³„ì‚°
    const dx = fieldRect.left + fieldRect.width / 2 - (cardRect.left + cardRect.width / 2);
    const dy = fieldRect.top + 40 - cardRect.top;

    // ë±ì—ì„œ ì¹´ë“œ ë¶„ë¦¬í•˜ì—¬ bodyë¡œ ì˜¬ë¦¼(ì• ë‹ˆë©”ì´ì…˜ ê°€ëŠ¥í•˜ê²Œ)
    document.body.appendChild(topCard);

    topCard.style.position = "absolute";
    topCard.style.left = cardRect.left + "px";
    topCard.style.top = cardRect.top + "px";

    // ì´ë™ ì• ë‹ˆë©”ì´ì…˜
    requestAnimationFrame(() => {
      topCard.style.transform = `translate(${dx}px, ${dy}px)`;
    });

    // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ íŒ¨ë¡œ ì´ë™
    topCard.addEventListener("transitionend", () => {
      topCard.style.transform = "none";
      topCard.style.position = "static";
      playerField.appendChild(topCard);
    }, { once: true });
  });
</script>

</body>
</html>
